# 作業履歴 (hister.md)

- Gitの競合状態を確認したのじゃ。
- `git status` により、3つのファイル（GazoToolsTest005.py, ideaMemo.text, lib/GazoToolsLib.py）で競合が発生していることを特定したのじゃ。
- 競合解決および環境整備のための実施計画（implementation_plan.md）を作成したのじゃ。
- 画像タグ付け機能を追加したのじゃ。
- `data/tagdata.csv` にタグを保存する仕組み（CSV読み書き）を `GazoToolsLogic.py` に実装したのじゃ。
- 画像ウィンドウの右クリックメニューからタグを編集できるダイアログを追加したのじゃ。
- 画像の左上にタグをオーバーレイ表示するようにしたのじゃ。
- **タグの管理方法をファイル名ベースからハッシュ（MD5）ベースに変更したのじゃ。**
    - これにより、ファイル名を変更したり画像を移動したりしてもタグが維持されるようになったのじゃ。
- **GazoToolsLogic.py の SyntaxError を修正したのじゃ（tryブロックの欠落を補完）。**
- **移動先フォルダのドラッグエリア（仕分けボタン）がメインウィンドウの縦サイズに合わせて伸縮するように改善したのじゃ。**
- **ファイル一覧リスト（子絵窓）の機能を大幅強化したのじゃ。**
    - シングルクリックでの画像表示をダブルクリックに変更し、誤操作を減らしたのじゃ。
    - **右クリックコンテキストメニュー**を追加したのじゃ。
        - **名前変更**: その場でファイルリネームが可能になったのじゃ。拡張子は自動で維持される安心設計にしたのじゃ。
        - **登録フォルダに移動**: メイン画面で登録したスロットへ直接移動・高速仕分けができるようになったのじゃ。
        - **タグ追加/編集**: 画像を開かずにタグの編集ができるようになったのじゃ。
- **複数ファイルのドラッグ＆ドロップ移動に対応したのじゃ。**
    - 登録スロットへのドロップ時に、複数のファイルを一度にまとめて仕分けできるようになったのじゃ。
- **GazoToolsAI.py を単体で実行できるように改修したのじゃ。**
    - `if __name__ == "__main__":` ブロックを追加し、単体起動時にAIモデルの読み込みと動作テストができるようになったのじゃ。
    - コマンドライン引数で画像パスを渡してベクトル化・比較を行える機能と、引数なしの場合の対話型テストモードを実装したのじゃ。
- **GazoToolsAI.py の処理内容を詳細にログ出力するように改善したのじゃ。**
    - 初期化、画像読み込み、前処理、推論、ベクトル化、比較の各ステップで進捗をコンソールに表示するようにしたのじゃ。
    - 単体実行時のトレースが非常に分かりやすくなったのじゃ。
- **スクリーンセーバー（自動再生）に「AI類似度スコア順再生」機能を追加したのじゃ。**
    - 類似度が指定した値以上の画像をAIが自動で探し出し、芋づる式に連続再生するモードを搭載したのじゃ。
    - 設定メニューの「SS設定」サブメニューからON/OFFと閾値の設定ができるようになったのじゃ。
